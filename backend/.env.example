# ==============================================
# Dead Man's Switch - Environment Configuration
# ==============================================
# Copy this file to .env and update with your values
# DO NOT commit .env file to version control!

# ==============================================
# Environment
# ==============================================
NODE_ENV=development  # development | production | test

# ==============================================
# Server Configuration
# ==============================================
PORT=5000
API_VERSION=v1

# ==============================================
# Database Configuration
# ==============================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/deadmansswitch_dev?schema=public

# ==============================================
# Redis Configuration
# ==============================================
# Used for caching, rate limiting, and job queues
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=              # Leave empty if no password
REDIS_DB=0

# ==============================================
# JWT Configuration
# ==============================================
# Generate secure random strings for production:
# node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"

JWT_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars
JWT_ACCESS_SECRET=your-super-secret-jwt-key-change-this-in-production-min-32-chars
JWT_ACCESS_EXPIRY=15m        # 15 minutes
JWT_REFRESH_SECRET=your-super-secret-refresh-token-key-change-this-min-32-chars
JWT_REFRESH_EXPIRY=7d        # 7 days

# ==============================================
# Encryption
# ==============================================
# 32-character key for encrypting sensitive data
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
ENCRYPTION_KEY=your-32-character-encryption-key-change-this-in-production!!!

# ==============================================
# Email Configuration (SMTP)
# ==============================================
# Development: Use Mailtrap (https://mailtrap.io)
# Production: Use SendGrid, AWS SES, or your SMTP provider

SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_SECURE=false            # true for 465, false for other ports
SMTP_USER=your-email-user
SMTP_PASSWORD=your-email-password
SMTP_FROM_EMAIL=noreply@deadmansswitch.com
SMTP_FROM_NAME=Dead Man's Switch

# ==============================================
# Email Configuration (SendGrid - Production)
# ==============================================
# Uncomment and use this in production instead of SMTP
# SENDGRID_API_KEY=your-sendgrid-api-key

# ==============================================
# CORS Configuration
# ==============================================
# Comma-separated list of allowed origins
CORS_ORIGIN=http://localhost:3000

# ==============================================
# Rate Limiting
# ==============================================
# Global rate limit settings
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100  # Max requests per window

# ==============================================
# Switch Configuration
# ==============================================
MAX_SWITCHES_PER_USER=10     # Maximum switches per user

# ==============================================
# Logging
# ==============================================
# Levels: error | warn | info | debug
LOG_LEVEL=debug              # Use 'info' or 'warn' in production
LOG_FILE_PATH=logs           # Directory for log files

# ==============================================
# Bull Queue Configuration
# ==============================================
QUEUE_NAME=dead-mans-switch-queue

# ==============================================
# Application URLs
# ==============================================
FRONTEND_URL=http://localhost:3000
APP_URL=http://localhost:5000
BACKEND_URL=http://localhost:5000

# ==============================================
# Two-Factor Authentication (2FA)
# ==============================================
TWO_FACTOR_APP_NAME=Dead Man's Switch
TWO_FACTOR_ISSUER=deadmansswitch.com

# ==============================================
# Feature Flags
# ==============================================
ENABLE_SWAGGER=true          # Enable Swagger API documentation
ENABLE_EMAIL_VERIFICATION=false  # Require email verification on signup
ENABLE_2FA=true              # Enable two-factor authentication
